// main cred api
(function(s,a,j,k,t){var n,l,o,q={checkButton:function(){var c=a("#cred-insert-shortcode"),e=!1,f=!1,b=null;switch(a("#cred-form-shortcodes-box-inner input.cred-shortcode-container-radio:checked").attr("id")){case "cred-post-creation-container":b=a("#cred_form-new-shortcode-select").val();if(!b||""==b)e=!0,f=j.locale.select_form;break;case "cred-post-edit-container":a('#cred-post-edit-container-advanced input[name="cred-edit-how-to-display"]:checked').val()=="insert-link"?a("#cred-edit-link-text-container").show():
a("#cred-edit-link-text-container").hide();a('#cred-post-edit-container-advanced input[name="cred-edit-what-to-edit"]:checked').val()=="edit-other-post"?a("#cred-edit-other-post-more").show():a("#cred-edit-other-post-more").hide();b=a("#cred_form-edit-shortcode-select").val();if(!b||""==b)e=!0,f=j.locale.select_form;else if(b=a("#cred-edit-post-select").val(),a('#cred-post-edit-container-advanced input[name="cred-edit-what-to-edit"]:checked').val()=="edit-other-post"&&(!b||""==b))e=!0,f=j.locale.select_post;
break;case "cred-post-child-link-container":b=a("#cred-child-form-page").val();if(!b||""==b)e=!0,f="Select a page which has child form";b=a("#cred_post_child_parent_id").val();if(a('#_cred-post-child-link-container input[name="cred-post-child-parent-action"]:checked').val()=="other"&&(!b||""==b))e=!0,f="Select Parent Post";break;case "cred-post-delete-link-container":b=a("#cred_post_delete_id").val();if(a('#cred-post-delete-link-container-advanced input[name="cred-delete-what-to-delete"]:checked').val()==
"delete-other-post"&&(!b||""==b||!k.isNumber(b)))e=!0,f=j.locale.insert_post_id;break;default:e=!0,f=j.locale.select_shortcode}f!==!1?c.attr("title",f):c.attr("title",j.locale.insert_shortcode);e?c.attr("disabled","disabled"):c.removeAttr("disabled")},checkButton2:function(c){var e=a(".cred-insert-shortcode2",c),f=!1,b=!1,d;d=a("input.cred-shortcode-container-radio:checked",c);if(d.hasClass("cred-post-creation-container2")){if(d=a(".cred_form-new-shortcode-select2",c).val(),""==d||!d)f=!0,b=j.locale.select_form}else if(d.hasClass("cred-post-edit-container2"))if(d=
a('.cred-post-edit-container-advanced2 input[name^="cred-edit-how-to-display"]:checked',c).val(),"insert-link"==d?a(".cred-edit-link-text-container2",c).show():a(".cred-edit-link-text-container2",c).hide(),d=a('.cred-post-edit-container-advanced2 input[name^="cred-edit-what-to-edit"]:checked',c).val(),"edit-other-post"==d?a(".cred-edit-other-post-more2",c).show():a(".cred-edit-other-post-more2",c).hide(),d=a(".cred_form-edit-shortcode-select2",c).val(),""==d||!d)f=!0,b=j.locale.select_form;else{if(d=
a(".cred-edit-post-select2",c).val(),"edit-other-post"==a('.cred-post-edit-container-advanced2 input[name^="cred-edit-what-to-edit"]:checked',c).val()&&(""==d||!d))f=!0,b=j.locale.select_post}else if(d.hasClass("cred-post-child-link-container2")){d=a(".cred-child-form-page2",c).val();if(""==d||!d)f=!0,b="Select a page which has child form";d=a(".cred_post_child_parent_id2",c).val();if(a('._cred-post-child-link-container2 input[name^="cred-post-child-parent-action"]:checked',c).val()=="other"&&(""==
d||!d))f=!0,b="Select Parent Post"}else if(d.hasClass("cred-post-delete-link-container2")){if(d=a(".cred_post_delete_id2",c).val(),a('.cred-post-delete-link-container-advanced2 input[name^="cred-delete-what-to-delete"]:checked',c).val()=="delete-other-post"&&(""==d||!d||!k.isNumber(d)))f=!0,b=j.locale.insert_post_id}else f=!0,b=j.locale.select_shortcode;b!==!1?e.attr("title",b):e.attr("title",j.locale.insert_shortcode);f?e.attr("disabled","disabled"):e.removeAttr("disabled")},popupHandler:function(c){c.stopPropagation();
c.preventDefault();var e,f,c=a(this);if(c.is(":disabled")||c.attr("disabled"))return!1;switch(a("#cred-form-shortcodes-box-inner input.cred-shortcode-container-radio:checked").attr("id")){case "cred-post-creation-container":c=a("#cred_form-new-shortcode-select").val();e=a("option:selected",a("#cred_form-new-shortcode-select")).text();if(!c)return!1;c='[cred_form form="'+e+'"]';break;case "cred-post-edit-container":c=a("#cred_form-edit-shortcode-select").val();e=a("#cred_form-edit-shortcode-select option:selected").text();
if(!c)return!1;switch(a('#cred-post-edit-container-advanced input[name="cred-edit-what-to-edit"]:checked').val()){case "edit-current-post":f=null;break;case "edit-other-post":f=a("#cred-edit-post-select").val();if(!f)return!1;break;default:return!1}switch(a('#cred-post-edit-container-advanced input[name="cred-edit-how-to-display"]:checked').val()){case "insert-link":var c="",b="_self",d="",g="",j="",h=[],c=a("#cred-edit-html-class").val(),d=a("#cred-edit-html-style").val(),g=a("#cred-edit-html-text").val(),
j=a("#cred-edit-html-attributes").val(),b=a("#cred-edit-html-target").val();c!=""&&h.push('class="'+c+'"');d!=""&&h.push('style="'+d+'"');g!=""&&h.push('text="'+g+'"');b!=""&&h.push('target="'+b+'"');j!=""&&h.push('attributes="'+j.split('"').join("%dbquo%").split("'").join("%quot%").split("=").join("%eq%")+'"');h=h.length>0?" "+h.join(" "):"";c=f==null?'[cred_link_form form="'+e+'"'+h+"]":'[cred_link_form form="'+e+'" post="'+f+'"'+h+"]";break;case "insert-form":c=f==null?'[cred_form form="'+e+'"]':
'[cred_form form="'+e+'" post="'+f+'"]';break;default:return!1}break;case "cred-post-child-link-container":e=a("#cred-child-form-page").val();if(e==""||isNaN(new Number(e)))return!1;switch(a('#_cred-post-child-link-container input[name="cred-post-child-parent-action"]:checked').val()){case "current":f=-1;break;case "form":f=null;break;case "other":f=a("#cred_post_child_parent_id").val();if(!f||isNaN(new Number(f)))return!1;break;default:return!1}c="";b="_self";j=g=d="";h=[];c=a("#cred-child-html-class").val();
d=a("#cred-child-html-style").val();g=a("#cred-child-link-text").val();j=a("#cred-child-html-attributes").val();b=a("#cred-child-html-target").val();c!=""&&h.push('class="'+c+'"');d!=""&&h.push('style="'+d+'"');g!=""&&h.push('text="'+g+'"');b!=""&&h.push('target="'+b+'"');j!=""&&h.push('attributes="'+j.split('"').join("%dbquo%").split("'").join("%quot%").split("=").join("%eq%")+'"');h=h.length>0?" "+h.join(" "):"";c=f==null?'[cred_child_link_form form="'+e+'"'+h+"]":'[cred_child_link_form form="'+
e+'" parent_id="'+f+'"'+h+"]";break;case "cred-post-delete-link-container":g=d=c="";b=!0;h=[];b="";c=a("#cred-delete-html-class").val();d=a("#cred-delete-html-style").val();g=a("#cred-delete-html-text").val();(b=a("#cred-refresh-after-action").is(":checked"))&&(c+=""==c?"cred-refresh-after-delete":" cred-refresh-after-delete");b=a('#cred-post-delete-link-container-advanced input[name="cred-delete-delete-action"]:checked').val();c!=""&&h.push('class="'+c+'"');d!=""&&h.push('style="'+d+'"');g!=""&&
h.push('text="'+g+'"');b!=""&&h.push('action="'+b+'"');h=h.length>0?" "+h.join(" "):"";a('#cred-post-delete-link-container-advanced input[name="cred-delete-what-to-delete"]:checked').val()=="delete-other-post"?(f=a("#cred_post_delete_id").val(),c='[cred_delete_post_link post="'+f+'"'+h+"]"):c="[cred_delete_post_link"+h+"]";break;default:return!1}c&&c!=""&&(k.InsertAtCursor(a("#content"),c),k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()}))},popupHandler2:function(c){c.stopPropagation();
c.preventDefault();var e,f,b,d,c=!1,g=a(this);if(g.is(":disabled")||g.attr("disabled"))return!1;var j=a(g.attr("data-content")),g=g.closest(".cred-popup-box");e=a("input.cred-shortcode-container-radio:checked",g);if(e.hasClass("cred-post-creation-container2"))e=a(".cred_form-new-shortcode-select2",g).val(),f=a(".cred_form-new-shortcode-select2 option:selected",g).text(),e?d='[cred_form form="'+f+'"]':c="No Form";else if(e.hasClass("cred-post-edit-container2"))if(e=a(".cred_form-edit-shortcode-select2",
g).val(),f=a(".cred_form-edit-shortcode-select2 option:selected",g).text(),e){switch(a('.cred-post-edit-container-advanced2 input[name^="cred-edit-what-to-edit"]:checked',g).val()){case "edit-current-post":b=null;break;case "edit-other-post":b=a(".cred-edit-post-select2",g).val();if(!b){c="No Post";break}break;default:c="No Option"}if(!c)switch(a('.cred-post-edit-container-advanced2 input[name^="cred-edit-how-to-display"]:checked',g).val()){case "insert-link":d="";var h="_self",m=e="",p="",i=[];d=
a(".cred-edit-html-class2",g).val();e=a(".cred-edit-html-style2",g).val();m=a(".cred-edit-html-text2",g).val();p=a(".cred-edit-html-attributes2",g).val();h=a(".cred-edit-html-target2",g).val();d!=""&&i.push('class="'+d+'"');e!=""&&i.push('style="'+e+'"');m!=""&&i.push('text="'+m+'"');h!=""&&i.push('target="'+h+'"');p!=""&&i.push('attributes="'+p.split('"').join("%dbquo%").split("'").join("%quot%").split("=").join("%eq%")+'"');i=i.length>0?" "+i.join(" "):"";d=null==b?'[cred_link_form form="'+f+'"'+
i+"]":'[cred_link_form form="'+f+'" post="'+b+'"'+i+"]";break;case "insert-form":d=null==b?'[cred_form form="'+f+'"]':'[cred_form form="'+f+'" post="'+b+'"]';break;default:c="No Option"}}else c="No Form";else if(e.hasClass("cred-post-child-link-container2"))if(b=a(".cred-child-form-page2",g).val(),b==""||isNaN(new Number(b)))c="No Form Page";else{switch(a('._cred-post-child-link-container2 input[name^="cred-post-child-parent-action"]:checked',g).val()){case "current":f=-1;break;case "form":f=null;
break;case "other":f=a(".cred_post_child_parent_id2",g).val();if(!f||isNaN(new Number(f))){c="No Parent";break}break;default:c="No Option"}c||(d="",h="_self",p=m=e="",i=[],d=a(".cred-child-html-class2",g).val(),e=a(".cred-child-html-style2",g).val(),m=a(".cred-child-link-text2",g).val(),p=a(".cred-child-html-attributes2",g).val(),h=a(".cred-child-html-target2",g).val(),d!=""&&i.push('class="'+d+'"'),e!=""&&i.push('style="'+e+'"'),m!=""&&i.push('text="'+m+'"'),h!=""&&i.push('target="'+h+'"'),p!=""&&
i.push('attributes="'+p.split('"').join("%dbquo%").split("'").join("%quot%").split("=").join("%eq%")+'"'),i=i.length>0?" "+i.join(" "):"",d=f==null?'[cred_child_link_form form="'+b+'"'+i+"]":'[cred_child_link_form form="'+b+'" parent_id="'+f+'"'+i+"]")}else e.hasClass("cred-post-delete-link-container2")?(m=e=d="",b=!0,i=[],b="",d=a(".cred-delete-html-class2",g).val(),e=a(".cred-delete-html-style2",g).val(),m=a(".cred-delete-html-text2",g).val(),(b=a(".cred-refresh-after-action",g).is(":checked"))&&
(d+=""==d?"cred-refresh-after-delete":" cred-refresh-after-delete"),b=a('.cred-post-delete-link-container-advanced2 input[name^="cred-delete-delete-action"]:checked',g).val(),d!=""&&i.push('class="'+d+'"'),e!=""&&i.push('style="'+e+'"'),m!=""&&i.push('text="'+m+'"'),b!=""&&i.push('action="'+b+'"'),i=i.length>0?" "+i.join(" "):"",a('.cred-post-delete-link-container-advanced2 input[name^="cred-delete-what-to-delete"]:checked',g).val()=="delete-other-post"?(b=a(".cred_post_delete_id",g).val(),d='[cred_delete_post_link post="'+
b+'"'+i+"]"):d="[cred_delete_post_link"+i+"]"):c="No Option";if(c)return!1;if(d&&""!=d)return k.InsertAtCursor(j,d),k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()}),!1}},r={app:k,gui:t,settings:j,route:function(a,e,f){return k.route("cred",j.ajaxurl,a,e,f)},getContents:function(){return{content:k.getContent(a("#content")),"cred-extra-css-editor":k.getContent(a("#cred-extra-css-editor")),"cred-extra-js-editor":k.getContent(a("#cred-extra-js-editor"))}},posts:function(){n=a(".cred-media-button");
l=a(".cred-popup-box");var c=a("#cred_form-new-shortcode-select").find("option"),e=a("#cred_form-edit-shortcode-select").find("option"),f=a(".cred-shortcodes-container-advanced");f.each(function(){a(this).hide();a(".cred-show-hide-advanced",a(this).parent()).text(j.locale.show_advanced_options)});a(".cred_ajax_loader_small").hide();f.filter(function(){if(a(this).hasClass("cred-show"))return!0;return!1}).each(function(){a(this).show();a(".cred-show-hide-advanced",a(this).parent()).text(j.locale.hide_advanced_options)});
l.on("click",".cred-show-hide-advanced",function(){var b=a(".cred-shortcodes-container-advanced",a(this).parent());b.hasClass("cred-show")?(b.removeClass("cred-show"),b.stop().slideFadeUp("slow","quintEaseIn"),a(this).text(j.locale.show_advanced_options)):(b.addClass("cred-show"),b.stop().slideFadeDown("slow","quintEaseOut"),a(this).text(j.locale.hide_advanced_options))});a("#cred-form-shortcodes-box").on("change","#cred_form-edit-shortcode-select",function(b){b.stopPropagation();b=a(this).val();
a("option:selected",a(this)).text();var c=a("#cred-form-addtional-loader").show();a.ajax({url:r.route("/Posts/getPosts?form_id="+b),timeout:1E4,type:"GET",data:"",dataType:"html",success:function(b){a("#cred-edit-post-select").html(b);c.hide()},error:function(){c.hide()}})});a(".cred-form-shortcodes-box2").on("change",".cred_form-edit-shortcode-select2",function(b){b.stopPropagation();var c=a(this).closest(".cred-form-shortcodes-box2"),b=a(this).val();a("option:selected",a(this)).text();a(".cred-form-addtional-loader2",
c).show();a.ajax({url:r.route("/Posts/getPosts?form_id="+b),timeout:1E4,type:"GET",data:"",dataType:"html",success:function(b){a(".cred-edit-post-select2",c).html(b);a(".cred-form-addtional-loader2",c).hide()},error:function(){a(".cred-form-addtional-loader2",c).hide()}})});a("#cred-child-form-page, .cred-child-form-page2, #cred_post_child_parent_id, .cred_post_child_parent_id2").cred_suggest(r.route("/Posts/suggestPostsByTitle"),{delay:200,minchars:3,multiple:!1,multipleSep:"",resultsClass:"ac_results",
selectClass:"ac_over",matchClass:"ac_match",onStart:function(){a("#cred-form-suggest-child-form-loader").show()},onComplete:function(){a("#cred-form-suggest-child-form-loader").hide()}});c.length==2&&(c.eq(0).removeAttr("selected"),c.eq(1).attr("selected","selected"));e.length==2&&(e.eq(0).removeAttr("selected"),e.eq(1).attr("selected","selected"),e.eq(1).closest("select").trigger("change"));c.length==1&&(c=a("#cred-form-shortcode-types-select-container #cred-post-creation-container"),c.attr("disabled",
"disabled"),c.closest("td").append('<span class="cred-warn">'+j.locale.create_new_content_form+"</span>"));e.length==1&&(c=a("#cred-form-shortcode-types-select-container #cred-post-edit-container"),c.attr("disabled","disabled"),c.closest("td").append('<span class="cred-warn">'+j.locale.create_edit_content_form+"</span>"));a(".cred-shortcodes-container").hide();a("#cred-form-addtional-loader").hide();a(".cred-form-addtional-loader2").hide();a("#cred-form-shortcode-types-select-container .cred-shortcode-container-radio").each(function(){this.checked=
!1});a("#cred-form-shortcode-types-select-container").on("change",".cred-shortcode-container-radio",function(){var b=a(this);if(b.is(":disabled"))return!1;b.is(":checked")&&(a(".cred-shortcodes-container").hide(),a("#_"+b.attr("id")).stop().slideFadeDown("slow","quintEaseOut"))});a(".cred-form-shortcode-types-select-container2").on("change",".cred-shortcode-container-radio",function(){var b=a(this);if(b.is(":disabled"))return!1;b.is(":checked")&&(b=b.attr("class"),b=b.replace("cred-shortcode-container-radio",
"").replace("cred-radio-10","").replace(/\s+/g,""),a(".cred-shortcodes-container").hide(),a("._"+b).stop().slideFadeDown("slow","quintEaseOut"))});a('#cred-post-edit-container-advanced input[name="cred-edit-how-to-display"]').change(function(){a(this).is(":checked")&&a(this).val()=="insert-link"?(a("#cred-edit-html-fieldset").show(),a("#cred-edit-html-single-fieldset").show()):(a("#cred-edit-html-fieldset").hide(),a("#cred-edit-html-single-fieldset").hide())});a('.cred-post-edit-container-advanced2 input[name="cred-edit-how-to-display"]').change(function(){var b=
a(this).closest(".cred-form-shortcode-button2");a(this).is(":checked")&&a(this).val()=="insert-link"?(a(".cred-edit-html-fieldset2",b).show(),a(".cred-edit-html-single-fieldset2",b).show()):(a(".cred-edit-html-fieldset2",b).hide(),a(".cred-edit-html-single-fieldset2",b).hide())});a("#cred-insert-shortcode").click(q.popupHandler);a(".cred-insert-shortcode2").click(q.popupHandler2);a("#post-body").on("click","#cred-form-shortcode-button-button",function(b){b.stopPropagation();b.preventDefault();n.css("z-index",
1);l.hide();a(this).closest(".cred-media-button").css("z-index",100);a("#cred-form-shortcodes-box").__show();q.checkButton();o=setInterval(function(){q.checkButton()},500)});a("#post-body").on("click",".cred-form-shortcode-button-button2",function(b){b.stopPropagation();b.preventDefault();n.css("z-index",1);l.hide();a(this).closest(".cred-media-button").css("z-index",100);a(".cred-form-shortcodes-box2",a(this).closest(".cred-media-button")).__show();var c=a(this).closest(".cred-form-shortcode-button2");
q.checkButton2(c);o=setInterval(function(){q.checkButton2(c)},500)});a("#cred-form-shortcodes-box").on("click","#cred-popup-cancel",function(a){a.preventDefault();k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()})});a(".cred-form-shortcodes-box2").on("click",".cred-popup-cancel2",function(a){a.preventDefault();k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()})});a(document).click(function(b){!b._cred_specific&&l.filter(function(){return a(this).is(":visible")}).has(b.target).length===
0&&k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()},!0)});a(document).keyup(function(a){a.keyCode==27&&k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()})});a("#post-body").on("click",".cred-cred-cancel-close",function(){k.doDelayed(function(){clearInterval(o);n.css("z-index",1);l.hide()})})}};s.cred_cred=r})(window,jQuery,cred_settings,cred_utils,cred_gui);
