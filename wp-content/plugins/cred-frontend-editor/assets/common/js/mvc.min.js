(function(v,g,k){function t(a){return!isNaN(a-0)&&a!==null&&a!==""&&a!==!1}function r(a){if(!isNaN(a-0)&&a!==null&&a!==""&&a!==!1&&(a=+a,0===a%1&&a>=0))return!0;return!1}function n(a){return"object"==typeof a&&null!==a}function p(a,b){return a&&b&&Object.prototype.hasOwnProperty.call(a,b)}function y(a){var b=0;if(n(a))for(var c in a)p(a,c)&&k!==a[c]&&b++;else k!==a&&(b=1);return b}function D(a,b){var c={};typeof b!="undefined"?g(a).each(function(a,e){c[e]=b}):g(a).each(function(a,b){c[b]=a});return c}
function z(a,b){if(a===b)return!0;if(b.length>a.length)return!1;var c=0,d=D(a,!0);g(b).each(function(a,b){d[b]&&c++});return c==b.length}function s(a){if(!a.substring)return k;a=a.replace(/\[(\w*)\]/g,".$1").replace(/^\./,"");return a.split(".")}function A(a){var b=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,a=String(a);b.lastIndex=0;b.test(a)&&(a=a.replace(b,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/'/g,'"').replace(/[a-zA-Z_]+[a-zA-Z0-9_]*\s*:/g,"]:").replace(/\+/g,"").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return a=eval("("+a+")");return!1}function q(a,b){return b.replace(RegExp("^"+a+"([\\.|\\[])"),"$1")}function B(a,b){var c,d=/^([_\.\-\d\w\[\]]+?)((:[\w\d\_]+)?\s*( in | has | eq | ne | ge | le | gt | lt |=|>|<|<>|>=|<=)\s*([,_\.\-\d\w\[\]]+))?$/,e={name:!1,key:!1,val:!1,func:!1,arrayVal:!1,isArray:!1,
op:!1};if(a&&a.substring&&(c=a.match(d)))if(e.name=c[1],e.key=b&&b.prefix?q(b.prefix,c[1]):c[1],c[2]){if(c[3])e.func=c[3].substring(1);e.op=g.trim(c[4]);e.val=c[5];if("]"==c[5].charAt(c[5].length-1)&&"["==c[5].charAt(0))e.isArray=!0,e.arrayVal=c[5].substring(0,c[5].length-1).substring(1).split(",")}return e}function x(a,b,c){if(""==b)return c;var b=s(b),d,e=a;if(!b)return a;for(;b&&b.length;){d=b.shift();if(n(e)&&p(e,d)&&b.length>0){var f=b[0];n(e[d])||(e[d]=r(f)?[]:{})}else b.length>0&&(f=b[0],n(e)||
(e=r(d)?[]:{}),e[d]=r(f)?[]:{});n(c)&&p(c,d)&&(c=c[d]);b.length>0&&(e=e[d])}e[d]=c;return a}function C(a,b){var c={},a=g(a);a.find("input[name], textarea[name], select[name]").each(function(){var d=g(this),e=d.attr("name"),f=b?q(b,e):e,h=d.val();if(d.is(":checkbox")||d.is(":radio"))h=a.find('[name="'+e+'"]').filter(":checked").val();c=x(c,f,h)});return c}if(!v.cred_mvc){if(!g.browser){g.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||
/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};matched=g.uaMatch(navigator.userAgent);browser={};if(matched.browser)browser[matched.browser]=!0,browser.version=matched.version;if(browser.chrome)browser.webkit=!0;else if(browser.webkit)browser.safari=!0;g.browser=browser}g._mvvm__suggest=function(a,b){function c(){var b=l.offset();m.css({top:b.top+a.offsetHeight+"px",left:b.left+"px"})}function d(a){if(/27$|38$|40$/.test(a.keyCode)&&
m.is(":visible")||/^13$|^9$/.test(a.keyCode)&&i())switch(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0,a.returnValue=!1,a.keyCode){case 38:(a=i())?a.removeClass(b.selectClass).prev().addClass(b.selectClass):m.children("li:last-child").addClass(b.selectClass);break;case 40:($currentResult=i())?$currentResult.removeClass(b.selectClass).next().addClass(b.selectClass):m.children("li:first-child").addClass(b.selectClass);break;case 9:case 13:j();break;case 27:m.hide()}else if(l.val().length!=
o)n&&clearTimeout(n),n=setTimeout(e,b.delay),o=l.val().length}function e(){var a=b.param?b.param:"q",c={},d=g.trim(l.val()),e,i;b.multiple&&(e=d.lastIndexOf(b.multipleSep),e!=-1&&(d=g.trim(d.substr(e+b.multipleSep.length))));d.length>=b.minchars?(cached=f(d))?h(cached.items):(b.onStart&&b.onStart.call(this,l),c[a]=d,g.post(b.source,c,function(a){m.hide();if(i=g.parseJSON(a)){h(i);for(var a=d,c=i.length,e;k.length&&p+c>b.maxCacheSize;)e=k.pop(),p-=e.size;k.push({q:a,size:c,items:i});p+=c}b.onComplete&&
b.onComplete.call(this,l)})):m.hide()}function f(a){var b,c;b=0;for(c=k.length;b<c;b++)if(k[b].q==a)return k.unshift(k.splice(b,1)[0]),k[0];return!1}function h(a){if(!a||!a.length)m.hide();else{var d="",e,f;c();e=0;for(f=a.length;e<f;e++)d+='<li data-val="'+a[e].value+'">'+a[e].label+"</li>";m.html(d).show();m.children("li").mouseover(function(){m.children("li").removeClass(b.selectClass);g(this).addClass(b.selectClass)}).click(function(a){a.preventDefault();a.stopPropagation();j()})}}function i(){var a;
if(!m.is(":visible"))return!1;a=m.children("li."+b.selectClass);a.length||(a=!1);return a}function j(){if($currentResult=i())b.multiple?($currentVal=l.val().indexOf(b.multipleSep)!=-1?l.val().substr(0,l.val().lastIndexOf(b.multipleSep)+b.multipleSep.length):"",l.val($currentVal+$currentResult.attr("data-val")+b.multipleSep)):l.val($currentResult.attr("data-val")),l.focus(),l.trigger("change"),m.hide(),b.onSelect&&b.onSelect.apply(l[0])}var l,m,n,o,k,p;l=g(a).attr("autocomplete","off");m=g(document.createElement("ul"));
n=!1;o=0;k=[];p=0;m.addClass(b.resultsClass).appendTo("body");c();g(v).load(c).resize(c);l.blur(function(){setTimeout(function(){m.hide()},100)});if(g.browser&&g.browser.msie)try{m.bgiframe()}catch(q){}g.browser&&g.browser.mozilla?l.keypress(d):l.keydown(d)};g.fn._mvvm__suggest=function(a,b){if(a)return b=b||{},b.multiple=b.multiple||!1,b.multipleSep=b.multipleSep||", ",b.source=a,b.delay=b.delay||100,b.resultsClass=b.resultsClass||"ac_results",b.selectClass=b.selectClass||"ac_over",b.matchClass=
b.matchClass||"ac_match",b.minchars=b.minchars||2,b.delimiter=b.delimiter||"\n",b.onSelect=b.onSelect||!1,b.onStart=b.onStart||!1,b.onComplete=b.onComplete||!1,b.maxCacheSize=b.maxCacheSize||3E3,this.each(function(){new g._mvvm__suggest(this,b)}),this};if(!Object.create||Object.create.toString().search(/native code/i)<0)Object.create=function(a){var b=function(){};g.extend(b.prototype,a);return b};var E=/[-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,w=g({}),u={model:{},view:{}},o={},j={isCheckable:function(a){return/radio|checkbox/i.test(a[0].type)},
findByName:function(a,b){b=b||g("body");return b.find("[name='"+a+"']")},getLength:function(a,b){var c=a[0];switch(c.nodeName.toLowerCase()){case "select":return g("option:selected",a).length;case "input":if(j.isCheckable(a))return j.findByName(c.name).filter(":checked").length}return b.length},depend:function(a,b){return j.dependTypes[typeof b]?j.dependTypes[typeof b](a,b):!0},dependTypes:{"boolean":function(a,b){return b},string:function(a,b){return!!g(b,a[0].form).length},"function":function(a,
b){return b(a)}},getValue:function(a){var b=a.attr("type"),c=a.val();if(b==="radio"||b==="checkbox")return g("input[name='"+a.attr("name")+"']:checked").val();if(typeof c==="string")return c.replace(/\r/g,"");return c},isOptional:function(a){var b=j.getValue(a);return!_validators.required.call(this,a,b)&&"dependency-mismatch"}},o={utils:{isObjectOrArray:n,isArrayIndex:r,hasOwn:p,removePrefix:q,extend:x,validator:j,parse:{key:s,object:A,form:C,condition:B}},Builder:{Model:{Functions:{},Prototype:{init:function(a){a&&
this.trigger("init",{target:this});return this},dispose:function(a){this._data=null;a&&this.trigger("destroy",{target:this})},trigger:function(a,b){b=b||{target:this,key:"",value:{}};o.EventManager.publish(o.Event(this,a),b);return this},func:function(a,b){if(g.isFunction(b))return this._function[a]=b,this;return this._functions[a]},data:function(a){if(a)return this._data=a,this;return this._data},eval:function(a){var b,c,d=B(a,{prefix:this.id});if(!1!==d.name&&!1!==d.op){b=d.key;b=b.replace(/\[\]$/,
"");c=this.get(b);if(!1!==d.func)if(this._functions&&this._functions[d.func])c=this._functions[d.func].call(this,d,a);else switch(d.func){case "count":c=this.count(b)}switch(d.op){case "has":return d.isArray&&n(c)?z(c,d.arrayVal):!d.isArray&&n(c)?g.inArray(d.val,c)>-1:!1;case "in":if(d.isArray&&n(c))return z(d.arrayVal,c);return d.isArray&&!n(c)?g.inArray(c,d.arrayVal)>-1:!1;case "eq":case "=":if(t(c))c=+c,d.val=+d.val;return c==d.val;case "ne":case "<>":if(t(c))c=+c,d.val=+d.val;return c!=d.val;
case "gt":case ">":if(t(c))c=+c,d.val=+d.val;return c>d.val;case "lt":case "<":if(t(c))c=+c,d.val=+d.val;return c<d.val;case "ge":case ">=":if(t(c))c=+c,d.val=+d.val;return c>=d.val;case "le":case "<=":if(t(c))c=+c,d.val=+d.val;return c<=d.val}}},merge:function(a,b,c){var d=a,a=a.replace(/\[\]$/,"");this._data=x(this._data,a,b);c&&this.trigger("change",{target:this,key:d,value:b});return this},mergeDom:function(a,b,c){return this.merge(a,C(b,this.id),c)},count:function(a,b){var c=(a=a.replace(/\[\]$/,
""))?this.get(a):b;return y(c)},last:function(a){var a=this.get(a),b=-1;if(g.isArray(a)){for(var c in a)p(a,c)&&r(c)&&(c=+c,b<c&&(b=c));return b}},next:function(a){a=this.last(a);k!==a&&a++;return a||0},has:function(a){var a=a.replace(/\[\]$/,""),a=s(a),b,c=this._data;if(!a)return!1;for(;a.length;)if(b=a.shift(),n(c)&&p(c,b))c=c[b];else return!1;return!0},get:function(a){var a=a.replace(/\[\]$/,""),a=s(a),b,c=this._data;if(a){for(;a.length;)if(b=a.shift(),n(c)&&p(c,b))c=c[b];else return;return c}},
set:function(a,b,c){var d=a,a=a.replace(/\[\]$/,""),a=s(a),e,f=this._data;if(!a)return this;for(;a.length;)if(e=a.shift(),n(f)&&p(f,e)&&a.length>0)f=f[e];else if(a.length>0)return this;f!==void 0&&n(f)&&(f[e]=b);c&&this.trigger("change",{target:this,key:d,value:b});return this},add:function(a,b,c){var d=a,a=a.replace(/\[\]$/,""),a=s(a),e,f,g=this._data;if(!a)return this;for(;a.length;)e=a.shift(),n(g)&&p(g,e)&&a.length>0?(f=a[0],n(g[e])||(g[e]=r(f)||""==f?[]:{}),g=g[e]):a.length>0&&(f=a[0],n(g)||
(g=r(e)||""==e?[]:{}),g[e]=r(f)||""==f?[]:{},g=g[e]);g[e]=b;c&&(this.trigger("add",{target:this,key:d,value:b}),this.trigger("change",{target:this,key:d,value:b}));return this},del:function(a,b){var c=a,a=a.replace(/\[\]$/,""),d=s(a),e,f=this._data;if(!d)return this;for(;d.length;)if(e=d.shift(),n(f)&&p(f,e)&&d.length>0)f=f[e];else if(d.length>0)return this;d=f[e];delete f[e];b&&(this.trigger("remove",{target:this,key:c,value:d}),this.trigger("change",{target:this,key:c,value:d}));return this}}},
View:{_CACHE_SIZE:2E3,_REFRESH_INTERVAL:2E3,Actions:{suggest:function(a,b){a[0].__loader=b.bind.loader?g(b.bind.loader):!1;a._mvvm__suggest(b.bind.url,{param:b.bind.param,delay:100,minchars:3,multiple:!1,multipleSep:"",resultsClass:"ac_results",selectClass:"ac_over",matchClass:"ac_match",onStart:function(a){a[0].__loader&&a[0].__loader.show()},onComplete:function(a){a[0].__loader&&a[0].__loader.hide()}})},validationMessage:function(a,b){b.bind&&(b.bind.domRef&&(a=g(b.bind.domRef)),k!==b.validationResult&&
(b.validationResult?a.hide():a.show()))},show:function(a,b){var c=!1,d=!1;if(b.bind)b=b.bind,b.domRef&&(a=g(b.domRef)),b.delay&&(c=parseInt(b.delay,10)),b.condition?(b.condition=this._model.eval(b.condition),k!==b.condition&&(d=b.condition?"show":"hide")):d="show",c?"show"==d?setTimeout(function(){a.show()},c):"hide"==d&&setTimeout(function(){a.hide()},c):"show"==d?a.show():"hide"==d&&a.hide()},hide:function(a,b){var c=!1,d=!1;if(b.bind)b=b.bind,b.domRef&&(a=g(b.domRef)),b.delay&&(c=parseInt(b.delay,
10)),b.condition?(b.condition=this._model.eval(b.condition),k!==b.condition&&(d=b.condition?"hide":"show")):d="hide",c?"show"==d?setTimeout(function(){a.show()},c):"hide"==d&&setTimeout(function(){a.hide()},c):"show"==d?a.show():"hide"==d&&a.hide()},toggle:function(a,b){if(b.bind)b=b.bind,b.domRef&&(a=g(b.domRef)),b.condition?(b.condition=this._model.eval(b.condition),k!==b.condition&&a.toggle(b.condition)):a.toggle()},addItem:function(a,b){if(b.bind){var b=b.bind,c=b.modelRef,d=b.tmplRef,e=b.domRef,
f=this.model(),h,i,j,l,m;if(c&&d&&e){c=q(f.id,c);e=g(e);d=g(d).html();if(b.replace&&n(b.replace)){h=b.replace;j=0;l=1;for(m=h.length;l<m;j+=2,l=j+1){if(h[l].next)i=h[l].next,i=q(f.id,i),h[l]=f.next(i);i=RegExp((""+h[j]).replace(E,"\\$&"),"g");d=d.replace(i,""+h[l]);c=c.replace(i,""+h[l])}}d=g(d);e.append(d.hide());f.mergeDom(c,d);this.clearCaches();f.trigger("change",{key:c,value:{}});this.sync(d);d.fadeIn("slow")}}},removeItem:function(a,b){if(b.bind){var b=b.bind,c=b.modelRef,d=b.domRef,e=this,
f=e.model();c&&d&&(b.confirm&&e._functions.confirm?e._functions.confirm(b.confirm,function(a){a&&g(d).fadeOut("slow",function(){g(this).remove();c=q(f.id,c);f.del(c);e.clearCaches();f.trigger("change",{key:c,value:{}})})}):g(d).fadeOut("slow",function(){g(this).remove();c=q(f.id,c);f.del(c);e.clearCaches();f.trigger("change",{key:c,value:{}})}))}},remove:function(a){if(data.bind)data=data.bind,data.domRef&&(a=g(data.domRef)),data.condition?(data.condition=this._model.eval(data.condition),k!==data.condition&&
data.condition&&a.remove()):a.remove()},removeFade:function(a,b){if(b.bind)b=b.bind,b.domRef&&(a=g(b.domRef)),b.condition?(b.condition=this._model.eval(b.condition),k!==b.condition&&b.condition&&a.fadeOut("slow",function(){g(this).remove()})):a.fadeOut("slow",function(){g(this).remove()})},set:function(a,b){if(b.bind&&(b=b.bind,b.what)){var c=this.model(),d=b.what,e,f,h;b.domRef&&(a=g(b.domRef));b.condition&&(h=c.eval(b.condition));for(e in d)if(p(d,e)&&(f=d[e]?q(c.id,d[e]):!1)&&c.has(f))switch(f=
c.get(f),e){case "options":if(a.is("select")&&g.isArray(f)){var i=a.find("optgroup"),j=a.val(),l="";i.length||(i=a);i.find("option").not("[data-dummy-option]").remove();for(var m=0;m<f.length;m++)l+=f[m]&&f[m].label?'<option value="'+f[m].value+'">'+f[m].label+"</option>":'<option value="'+f[m]+'">'+f[m]+"</option>";i.append(l);a.val(j)}break;case "html":a.html(f);break;case "class":i=f.charAt(0);!0===h?"-"==i?a.removeClass(f.substring(1)):"+"==i?a.addClass(f.substring(1)):f&&""!=f&&a.addClass(f):
!1===h?"-"==i?a.addClass(f.substring(1)):"+"==i?a.removeClass(f.substring(1)):f&&""!=f&&a.removeClass(f):"-"==i?a.removeClass(f.substring(1)):"+"==i?a.addClass(f.substring(1)):f&&""!=f&&a.addClass(f);break;case "text":a.text(f);break;default:k===h?"checked"==e?a.val()==f?a.prop("checked",!0):a.prop("checked",!1):"disabled"==e?a.val()==f?a.prop("disabled",!0):a.prop("disabled",!1):a.attr(e,f):!0===h?"checked"==e?a.prop("checked",!0):"disabled"==e?a.prop("disabled",!0):a.attr(e,f):!1===h&&("checked"==
e?a.prop("checked",!1):"disabled"==e?a.prop("disabled",!1):a.attr(e,""))}}},bind:function(a,b){var c,d,e,f=this._model;if(a.is("input, textarea, select")){if(e=a.attr("name"))c=q(f.id,e),d=f.get(c),c=a.val(),a.is(":radio")?d==c&&(this.getElements('input[name="'+e+'"]').not(a).prop("checked",!1),a.prop("checked",!0)):a.is(":checkbox")?(e=this.getElements('input[type="checkbox"][name="'+e+'"]'),e.length>1&&g.isArray(d)?e.each(function(){var a=g(this);g.inArray(a.val(),d)>-1?a.prop("checked",!0):a.prop("checked",
!1)}):d==c?a.prop("checked",!0):a.prop("checked",!1)):a.val(d)}else b.value?a.html(b.value):b.bind&&b.bind.key&&(c=q(f.id,b.bind.key),f.has(c)&&a.html(f.get(c)))}},Validators:{required:function(a,b,c){if(c&&!j.depend(a,c))return"dependency-mismatch";if(a[0].nodeName.toLowerCase()==="select")return(a=a.val())&&a.length>0;if(j.isCheckable(a))return j.getLength(a,b)>0;return g.trim(b).length>0},email:function(a,b){return j.isOptional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(b)},
url:function(a,b){return j.isOptional(a)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(b)},
date:function(a,b){return j.isOptional(a)||!/Invalid|NaN/.test((new Date(b)).toString())},dateISO:function(a,b){return j.isOptional(a)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(b)},number:function(a,b){return j.isOptional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(b)},digits:function(a,b){return j.isOptional(a)||/^\d+$/.test(b)},creditcard:function(a,b){if(j.isOptional(a))return"dependency-mismatch";if(/[^0-9 \-]+/.test(b))return!1;for(var c=0,d=0,e=!1,b=b.replace(/\D/g,""),f=b.length-1;f>=
0;f--){d=b.charAt(f);d=parseInt(d,10);if(e&&(d*=2)>9)d-=9;c+=d;e=!e}return c%10===0},minlength:function(a,b,c){b=g.isArray(b)?b.length:j.getLength(a,g.trim(b));return j.isOptional(a)||b>=c},maxlength:function(a,b,c){b=g.isArray(b)?b.length:j.getLength(a,g.trim(b));return j.isOptional(a)||b<=c},rangelength:function(a,b,c){b=g.isArray(b)?b.length:j.getLength(a,g.trim(b));return j.isOptional(a)||b>=c[0]&&b<=c[1]},min:function(a,b,c){return j.isOptional(a)||b>=c},max:function(a,b,c){return j.isOptional(a)||
b<=c},range:function(a,b,c){return j.isOptional(a)||b>=c[0]&&b<=c[1]},equalTo:function(a,b,c){return b===g(c).val()}},Events:{view:{change:[function(a,b){var c=this._model,d=this.attribute("bind"),e="["+d+"]",f,h,i;"change"==a.type&&this._autoBind&&b.el.is("input, textarea, select")&&(f=b.el.attr("name")||"",h=q(c.id,f),c.has(h)&&(b.el.is(":checkbox")?(f=this.getElements('input[type="checkbox"][name="'+f+'"]'),f.length>1?(i=[],f.each(function(){var a=g(this);a.is(":checked")?i.push(a.val()):i.push("")})):
i=f.is(":checked")?f.val():""):i=b.el.val(),c.set(h,i,!0)));b.el.attr(d)&&this._doAction(b.el,{event:a,data:b});this._doValidationAction(this.getElements(e),{event:a,data:b});this.trigger("change",b)}]},model:{change:[function(a,b){var c=this._model.id+b.key,d="["+this.attribute("bind")+"]",c='input[name="'+c+'"], textarea[name="'+c+'"], select[name="'+c+'"]';this._doAction(this.getElements(d),{event:a,data:b});this._autoBind&&this._doAutoBindAction(this.getElements(c),{event:a,data:b})}]}},Functions:{confirm:function(a,
b){var c=confirm(a);g.isFunction(b)&&b.call(this,c)}},Prototype:{_doAction:function(a,b){var c=this;a.each(function(){var a=g(this),e=c.get(a,"bind");if(!b.sync||e&&(!e||!(e.event&&e.event!="change")))if(e&&e.action&&c._actions[e.action]&&(e.event&&b.event&&b.event.type==e.event||!e.event)){var f=g.extend(!0,{},e);c._actions[e.action].call(c,a,{bind:f})}})},_doValidationAction:function(a){var b=this;a.each(function(){var a=g(this),d=b.get(a,"bind");if(d.validate){var d=d.validate,e,f=!0,h,i,k=j.getValue(a);
for(e in d){if(p(d,e)&&b._validators[e]&&d[e].actions&&d[e].actions.length){f=a.is(":hidden")?!0:b._validators[e].call(b,a,k,d[e].params);h=0;for(i=d[e].actions.length;h<i;h++)d[e].actions[h].action&&b._actions[d[e].actions[h].action]&&b._actions[d[e].actions[h].action].call(b,a,{bind:d[e].actions[h],validationResult:f})}if(!f)break}}})},_doInitAction:function(a){var b=this;a.each(function(){var a=g(this),d=b.get(a,"bind");if(d&&d.event&&"init"==d.event&&d.action)for(var e in d.action)if(p(d.action,
e)&&b._actions[e]){var f=g.extend(!0,{},d.action[e]);b._actions[e].call(b,a,{bind:f})}})},_doAutoBindAction:function(a,b){var c=this,d=c._model;c._actions.bind&&a.each(function(){var a=g(this),f=a.attr("name")||"",f=b&&b.key?b.key:q(d.id,f),h;if(b&&b.value)h=b.value;else if(d.has(f))h=d.get(f);else return;c._actions.bind.call(c,a,{key:f,value:h})})},init:function(a){a&&this.trigger("init",{target:this});return this},dispose:function(){if(this._model)this._model.dispose(),this._model=null},model:function(a){if(a)return this._model=
a,this;return this._model},actions:function(a){if(a)return this._actions=a,this;return this._actions},action:function(a,b){if(g.isFunction(b))return this._actions[a]=b,this;return this._actions[a]?this._actions[a]:k},functions:function(a){if(a)return this._functions=a,this;return this._functions},func:function(a,b){if(g.isFunction(b))return this._functions[a]=b,this;return this._functions[a]?this._functions[a]:k},validators:function(a){if(a)return this._validators=a,this;return this._validators},
validator:function(a,b){if(g.isFunction(b))return this._validators[a]=b,this;return this._validators[a]?this._validators[a]:k},events:function(a){if(a)return this._events=a,this;return this._events},event:function(a,b){a=a?a.split(":"):[];if(a[0]&&(a[0]=="view"||a[0]=="model")&&a[1])if(g.isFunction(b))return this._events[a[0]]||(this._events[a[0]]={}),this._events[a[0]][a[1]]||(this._events[a[0]][a[1]]=[]),this._events[a[0]][a[1]].push(b),this;else if(this._events[a[0]]&this._events[a[0]][a[1]])return this._events[a[0]][a[1]];
return!1},attributes:function(a){if(a)return this._atts=a,this;return this._atts},attribute:function(a,b){if(b)return this._atts[a]=b,this;return this._atts[a]?this._atts[a]:k},getElements:function(a,b,c){if(c)return b=b?g(b):this.$dom,b.find(a);k!==this._selectorsCacheTime&&(new Date).getTime()-this._selectorsCacheTime>this._REFRESH_INTERVAL&&this.clearCaches();if(!this._selectorsCache[a]&&(b=b?g(b):this.$dom,this._selectorsCache[a]=b.find(a),k===this._selectorsCacheTime))this._selectorsCacheTime=
(new Date).getTime();return this._selectorsCache[a]},clearCaches:function(){this._selectorsCache={};delete this._selectorsCacheTime;return this},get:function(a,b){if(!this._memoize)this._memoize={};var c;if(c=this._atts[b])c=k!==a.attr(this._atts[b])?!0:!1;if(c){c=a.attr(this._atts[b]);if(!this._memoize[c]){for(;y(this._memoize)>=this._CACHE_SIZE;)for(var d in this._memoize)if(p(this._memoize,d)){delete this._memoize[d];break}this._memoize[c]=A(c)}return this._memoize[c]}return!1},autobind:function(a){if("undefined"!=
typeof a)return this._autoBind=a?!0:!1,this;return this._autoBind},sync:function(a){var b=this._model,c="["+this.attribute("bind")+"]",b='input[name^="'+b.id+'["], textarea[name^="'+b.id+'["], select[name^="'+b.id+'["]';if(!a)a=this.dom;a=g(a);this._doInitAction(this.getElements(c,a,!0),{sync:!0});this._doAction(this.getElements(c,a,!0),{sync:!0});this._autoBind&&this._doAutoBindAction(this.getElements(b,a,!0),{sync:!0});this._doValidationAction(this.getElements(c,a,!0),{sync:!0});return this},forceValidation:function(){this._doValidationAction(this.getElements("["+
this.attribute("bind")+"]",!1,!0));return this},bind:function(a,b){var c=this,d=c._model;if(c._events){if(!b)b=v.document;c.dom=b;c.$dom=g(c.dom);if(c._events.model)for(var e in c._events.model)p(c._events.model,e)&&o.EventManager.subscribe(o.Event(d,e),function(a,b){for(var d=0,f=c._events.model[e].length;d<f;d++)c._events.model[e][d].apply(c,[a,b])});a||(a=["change","click"]);if(c._events.view&&c._events.view.change&&a&&a.length){var f="["+c.attribute("bind")+"]",h='input[name^="'+d.id+'["], textarea[name^="'+
d.id+'["], select[name^="'+d.id+'["]';c.$dom.on(a.join(" "),f,function(a){var b=g(this);if(c._events.view.change){var d=c.get(b,"bind");if(d&&(!d.event&&a.type=="change"||d.event&&a.type==d.event))for(var e=0,f=c._events.view.change.length;e<f;e++)c._events.view.change[e].call(c,a,{el:b,bind:d})}})}if(c._events.view&&c._events.view.change&&c._autoBind)c.$dom.on("change",h,function(a){var b=g(this),e=b.attr("name")||"",e=q(d.id,e);if(d.has(e))for(var f=0,h=c._events.view.change.length;f<h;f++)c._events.view.change[f].call(c,
a,{el:b,key:e})})}return this},trigger:function(a,b){b=b||{target:this};o.EventManager.publish(o.Event(this,a),b);return this}}},create:function(a,b){var c={},a=a||{},b=b||{};g.extend(a,b);return c=Object.create(a)}},Event:function(a,b){return"_o_O_o_"+a.id+":"+b},EventManager:{publish:function(a,b){w.trigger(a,b);return!0},subscribe:function(a,b){if(!b)return!1;w.on(a,b);return!0},unsubscribe:function(a,b){b?w.off(a,b):w.off(a);return!0}},Model:function(a,b){var c=g.extend({},o.Builder.Model.Prototype);
extendArgs=Array.prototype.slice.call(arguments,2);for(var d=0,e=extendArgs.length;d<e;d++)g.extend(c,extendArgs[d]);return o.Builder.create(c,{id:a,_data:b,_functions:o.Builder.Model.Functions})},View:function(a,b){var c={id:a,dom:null,$dom:null,_autoBind:!1,_actions:o.Builder.View.Actions,_validators:o.Builder.View.Validators,_events:o.Builder.View.Events,_functions:o.Builder.View.Functions,_atts:{bind:"data-"+a+"-bind"},_model:b,_memoize:{},_selectorsCache:{},_REFRESH_INTERVAL:o.Builder.View._REFRESH_INTERVAL,
_CACHE_SIZE:o.Builder.View._CACHE_SIZE},d=g.extend({},o.Builder.View.Prototype);extendArgs=Array.prototype.slice.call(arguments,2);for(var e=0,f=extendArgs.length;e<f;e++)g.extend(d,extendArgs[e]);return o.Builder.create(d,c)},add:function(a,b,c){u[a][b]=c},remove:function(a,b){u[a][b]=null;delete u[a][b]},get:function(a,b){if(u[a]&&u[a][b])return u[a][b]}};v.cred_mvc=o}})(window,jQuery,void 0);
